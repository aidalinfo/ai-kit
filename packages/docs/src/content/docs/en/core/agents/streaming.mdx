---
title: Streaming
description: Consume an agent's responses token by token
sidebar:
  order: 5
locale: en-US
---

`agent.stream` returns an async stream so you can process tokens progressively and access aggregated metadata once the generation finishes. As in other examples, we reuse the `assistant` created in the [introduction](./introduction).

```ts
const stream = await assistant.stream({
  prompt: "Summarize the latest release notes.",
});
```

## Iterate over tokens

```ts
let text = "";
for await (const chunk of stream.textStream) {
  text += chunk;
  process.stdout.write(chunk);
}
```

- `textStream` exposes decoded UTF-8 tokens.
- `rawStream` yields the underlying chunks directly from the SDK.
- `experimental_stream` gives access to the lower-level stream object when you need custom handling.

## Watch for tool calls

`stream.experimental_tools` yields events every time the model triggers a tool. Each event includes `toolName`, `args`, and the eventual tool result once resolved.

```ts
for await (const event of stream.experimental_tools) {
  if (event.type === "started") {
    console.log(`Tool ${event.toolName} called with`, event.args);
  }

  if (event.type === "finished") {
    console.log(`Tool ${event.toolName} returned`, event.result);
  }
}
```

## Inspect the final result

Call `stream.final()` to get the same structure as `agent.generate`:

```ts
const result = await stream.final();

console.log(result.text);
console.log(result.usage);
```

`stream.final()` resolves when the generation is complete or when the stream is closed manually.
