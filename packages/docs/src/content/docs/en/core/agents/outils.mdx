---
title: Tools & tool loop
description: Declare default tools and control the loopTools behavior
sidebar:
  order: 3
locale: en-US
---

Tools let your agents trigger application code (search, API calls, business logicâ€¦). AI Kit registers them on the agent and automatically injects them into each call.

## Add default tools

```ts
import { Agent, google } from "@ai_kit/core";

const assistant = new Agent({
  name: "assistant-life",
  instructions: "Life assistant",
  model: google("gemini-2.5-flash"),
  tools: {
    google_search: google.tools.googleSearch({}),
  },
  loopTools: true,
  maxStepTools: 15,
});

await assistant.generate({ prompt: "What is the weather like in Paris?" });
```

Use the `tools` option to expose tools on every call. You can still override them temporarily by providing `tools` directly to `generate` or `stream`.
Similarly, `loopTools` and `maxStepTools` set on the agent serve as defaults that each call can override.

## Automatic tool loop

When `loopTools` is enabled and the agent has tools, AI Kit orchestrates calls automatically: after each model response containing `toolCalls`, the matching tools execute, then the conversation resumes until the final text is produced. The result exposes a `loopTool: true` flag to make developer experience checks easier.

```ts
const result = await assistant.generate({
  prompt: "Find the documentation for the 'tool loop' workflow.",
  loopTools: true,
});

if (result.loopTool) {
  console.log("Tools were executed during the conversation.");
}
```

Tune the loop with:

- `loopTools?: boolean` on the agent to enable the loop (disabled by default, even if tools exist).
- `maxStepTools?: number` to cap the total number of tool executions before aborting the loop (default: `20`).
- On a call, override `loopTools` or `maxStepTools` in `agent.generate({...})` or `agent.stream({...})`.

```ts
// The agent is configured with loopTools: true,
// but we can disable it for a specific call:
await assistant.generate({
  prompt: "Answer without running tools.",
  loopTools: false,
});
```
