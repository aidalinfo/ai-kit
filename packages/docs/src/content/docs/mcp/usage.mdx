---
title: Serveur MCP AI Kit
description: Exposez la documentation AI Kit via le Model Context Protocol
sidebar:
  order: 1
---

Le package `@ai_kit/mcp-docs` expose la documentation AI Kit via le Model Context Protocol (MCP). Vous pouvez l'exécuter en tant que serveur autonome ou l'intégrer dans votre client compatible MCP afin que la documentation reste accessible pour vos agents.

## Intégration dans un client MCP

Ajoutez le serveur à la configuration de votre client. Par exemple, avec l'inspecteur Claude Desktop :

```json
{
  "mcpServers": {
    "ai_kit-docs": {
      "command": "npx",
      "args": ["-y", "@ai_kit/mcp-docs@latest"]
    }
  }
}
```

Pour Codex, configurez le serveur via TOML :

```toml
[mcp_servers."ai_kit-docs"]
command = "npx"
args = ["-y", "@ai_kit/mcp-docs@latest"]
env = { }
startup_timeout_ms = 20000  # optionnel
```

Pour Claude Code, définissez le serveur de la même manière :

```json
{
  "mcpServers": {
    "ai_kit-docs": {
      "command": "npx",
      "args": ["-y", "@ai_kit/mcp-docs@latest"]
    }
  }
}
```

Le serveur enregistre deux outils :

- `ai_kit-docs` liste les répertoires ou lit les fichiers Markdown/MDX depuis l'arborescence `docs/`. Passez `path` (relatif à `docs/`) pour ouvrir un fichier ou un répertoire, et fournissez optionnellement des `keywords` pour mettre en évidence les correspondances.
- `ai_kit-docs-search` effectue une recherche par mots-clés dans la documentation et retourne des extraits paginés. Utilisez cet outil lorsque vous souhaitez des références ciblées sans charger des fichiers entiers.

Demandez `core/quickstart.md`, par exemple, pour recevoir le contenu Markdown rendu et prêt pour votre agent.

## Créer votre propre serveur MCP

Le package `@ai_kit/mcp` offre un DSL léger inspiré de Mastra. Il enveloppe le SDK officiel MCP pour que vous puissiez enregistrer des outils, des ressources et des prompts sans gérer la plomberie (`McpServer.registerTool`, `ResourceTemplate`, etc.).

```ts
import { defineMcpServer, defineTool } from "@ai_kit/mcp";
import { z } from "zod";

const weatherServer = defineMcpServer({
  name: "ai-kit-weather",
  version: "0.1.0",
  tools: {
    forecast: defineTool({
      description: "Renvoie une météo factice pour la ville demandée.",
      inputSchema: z.object({ city: z.string() }),
      handler: async ({ city }) => `Ensoleillé sur ${city}`
    })
  }
});

await weatherServer.startStdioServer({
  onReady: () => console.error("Serveur météo MCP prêt.")
});
```

### Points clés

- Les handlers peuvent renvoyer directement une `string` ou un tableau de `string` ; le package convertit automatiquement en `CallToolResult`.
- Pour une ressource statique, fournissez juste `uri` et un `read` qui retourne du texte (ou un `Buffer`). Pour une ressource dynamique, utilisez `template` et `list`/`complete` si nécessaire.
- `definePrompt` fonctionne sur le même principe et accepte un handler qui renvoie une `string`, un tableau de messages ou un `GetPromptResult` complet.

Utilisez la méthode `createServer()` si vous devez brancher un transport personnalisé (WebSocket, SSE, etc.), ou `startStdioServer()` pour les clients MCP classiques (Claude Desktop, Cursor, Codex).
